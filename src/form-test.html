<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="form-test">
	<template>
		<style include="shared-styles">
			:host {
				display: block;
				padding: 10px;
			}
			.mt-20{
				margin-top: 20px;
			}
		</style>
		<div>
			<paper-input value="{{myIp1}}" label="input 1"></paper-input>
			<paper-input value="{{myIp2}}" label="input 2"></paper-input>
			<paper-input value="{{myIp3}}" label="input 3"></paper-input>
		</div>
		<div class="mt-20">
			<paper-button raised on-tap="sendData">POST REQUEST</paper-button>
		</div>
		<div>
			<h3>serverSuccessObj</h3>
			{{ssoDisplay}}
		</div>
		<div>
			<h3>serverErrorObj</h3>
			{{serverErrorObj}}
		</div>


		<iron-ajax
				url="https://jsonplaceholder.typicode.com/posts"
				id="postExample"
				handle-as="json"
				content-type="application/json"
				method="POST"
				body='{{postBody}}'
				on-response="serverSuccessCb"
				last-response="{{serverSuccessObj}}"
				on-error="serverErrorCb"
				last-error="{{serverErrorObj}}">
		</iron-ajax>
	</template>

<script>
 	 class FormTest extends Polymer.Element {
		static get is() {return 'form-test';}

    static get properties() {
      return {
				myIp1: {
					type: String,
					notify: true,
				},
				myIp2: {
					type: String,
					notify: true,
				},
				myIp3: {
					type: String,
					notify: true,
				},
				postBody: {
					type: String,
					computed: 'getPostBody(myIp1, myIp2, myIp3)'
				},
				serverErrorObj: Object,
				serverSuccessObj: Object,
				ssoDisplay: {
					type: String,
					computed: 'getSso(serverSuccessObj)'
				}
			}
    }
			sendData(event) {
				this.$.postExample.generateRequest();
			}
			getPostBody(i1, i2, i3) {
				return {
					i1: i1,
					i2: i2,
					i3: i3
				};
			}
			serverSuccessCb() {
			}
			serverErrorCb() {
			}
			getSso(serverSuccessObj) {
				return JSON.stringify(serverSuccessObj);
			}
		}
  customElements.define(FormTest.is, FormTest);
	</script>
</dom-module>
