<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="../bower_components/vaadin-grid/vaadin-grid-column.html">
<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="array-test">
 <template>

   <vaadin-grid page-size="10" aria-label="Manage Service Types" items="{{services}}" sort="_sort">
     <vaadin-grid-column width="50px" flex-grow="0">
       <template class="header">#</template>
       <template>[[index]]</template>
     <vaadin-grid-column>

     <vaadin-grid-column>
   	 <template class="header">Name</template>
   	 <template>[[item.name]]</template>
   	</vaadin-grid-column>

   	<vaadin-grid-column>
   	 <template class="header">Duration (Min)</template>
   	 <template>[[item.duration]]</template>
   	</vaadin-grid-column>

   	<vaadin-grid-column>
   	 <template class="header">Description</template>
   	 <template>[[item.description]]</template>
   	</vaadin-grid-column>

   	<vaadin-grid-column>
   	 <template class="header">Actions</template>
   	 <template>
   	 <div class="flex1">
   	  <a href="[[rootPath]]openmrs-home">
   	  <paper-icon-button icon="icons:create"></paper-icon-button>
   	  </a>
   	  <paper-icon-button icon="icons:close" raised on-tap="_remove"></paper-icon-button>
   	 </div>
   	 </template>
   	</vaadin-grid-column>

      </vaadin-grid>

  <div class="test">
    <h1>help</h1>
  </div>

  <div class="test">
  <paper-button style="background-color: green" raised on-tap="_push"></paper-button>
  </div>
 </template>

 <script>
  class ArrayTest extends Polymer.Element {
	static get is() {return 'array-test'; }

	static get properties() {
	 return {
		services: {
		  type: Array,
		  value() {
		    return
        for (i=0; i <= services.length; i++)
        [
      {index: [i], name: 'Dermatology', duration: '10', description: 'not worth'},
      {index: [i], name: 'Dermatology (New Patient)', duration: '20', description: []},
      {index: [i], name: 'General Medicine', duration: '15', description: []},
      {index: [i], name: 'General Medicine (New Patient)', duration: '30', description: []},
      {index: [i], name: 'Gynecology', duration: '10', description: []},
      {index: [i], name: 'Gynecology (New Patient)', duration: '20', description: []},
      {index: [i], name: 'Infectious Disease', duration: '15', description: []},
      {index: [i], name: 'Infectious Disease (New Patient)', duration: '30', description: []},
      {index: [i], name: 'Mental Health', duration: '60', description: []},
      {index: [i], name: 'Mental Health (New Patient)', duration: '90', description: []},
      {index: [i], name: 'Neurology', duration: '15', description: []},
      {index: [i], name: 'Neurology (New Patient)', duration: '30', description: []},
      {index: [i], name: 'Obstetrics', duration: '10', description: []},
      {index: [i], name: 'Obstetrics (New Patient)', duration: '20', description: []},
      {index: [i], name: 'Oncology', duration: '15', description: []},
      {index: [i], name: 'Oncology (New Patient)', duration: '30', description: []},
      {index: [i], name: 'Pediatrics', duration: '10', description: []},
      {index: [i], name: 'Pediatrics (New Patient)', duration:'20', description: []},
      {index: [i], name: 'Surgery', duration: '10', description: []},
      {index: [i], name: 'Surgery (New Patient)', duration: '20', description: []},
      {index: [i], name: 'Urology', duration: '20', description: []},
      {index: [i], name: 'Urology (New Patient)', duration: '20', description: []},
			];
		  }
		}
	      }
	}
	_push() {
	  this.push('services', {name: 'Gynecology', duration: '20', description: []});
    this.notifyPath('services', {name});
	}

  _sort(a,b) {
    var nameA = a.name.toUpperCase();
    var nameB = b.name.toUpperCase();
    if (nameA < nameB) {
      return -1;
    }
    if (nameA > nameB) {
      return 1;
    }
    return 0;
  }
  _remove(services) {
    var index = this.services.indexOf('services');
    this.splice('services', index, 1);
    this.notifyPath('services');
  }
  computeFilter(string) {
    if (!string) {
      return null;
    }
    else {
      string = string.toLowerCase();
      return function(services) {
        var name = services.name.toLowerCase();
        return (first.indexOf(string) != -1);
      };
    }
  }
}

  customElements.define(ArrayTest.is, ArrayTest);
 </script>
</dom-module>
